> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [github.com](https://github.com/CatsAndMice/blog/issues/65)

Git 是我们日常工作中不可或缺的版本控制系统。它提供了许多强大的功能，其中之一是 Git Stash（暂存）。Git Stash 可以帮助我们在切换分支或保存未完成的工作时，临时保存当前的修改，以便稍后重新应用。本文将介绍 Git Stash 的用途、常见场景以及如何使用该功能。

Git Stash 的应用
-------------

Git Stash 的用途非常广泛，特别适用于以下几种常见场景：

1.  **分支切换：**当你正在进行某个分支上的开发工作，但需要紧急修复其他分支的 bug 或进行其他任务时，你可以使用 Git Stash 来保存当前分支上的修改。这样，你可以切换到其他分支，完成紧急任务后再回到原来的分支，并通过恢复 Stash 来重新应用你之前保存的修改。
    
2.  **临时保存工作状态：**有时候你可能需要中断当前的工作，但又不想提交未完成的修改。使用 Git Stash 可以将你的修改临时保存起来，以便稍后继续工作。这在你需要暂时切换到其他任务、参与会议或处理其他紧急问题时非常有用。
    
3.  **解决代码冲突：**当你在合并分支或拉取远程更新时遇到代码冲突，你可以使用 Git Stash 来保存当前的修改，并将工作区恢复到干净的状态。然后你可以解决冲突，再重新应用你之前保存的修改。
    

Git Stash 的使用
-------------

下面是一些常用的 Git Stash 命令：

*   `git stash`：保存当前工作区的修改，但不保存已提交的修改；
    
*   `git stash save "message"`：保存当前工作区的修改，并添加一条说明信息；
    
*   `git stash list`：列出所有储藏记录；
    
*   `git stash apply [stash@{n}]`：应用某个储藏记录，并将其从储藏列表中删除；
    
*   `git stash pop [stash@{n}]`：应用某个储藏记录，并将其从储藏列表中删除，同时恢复当前工作目录到储藏时的状态。
    

[![](https://camo.githubusercontent.com/55e14b584e25f75ceb1e6672603ffb8e020ab5a6d06142650b8bd754d5d83ca1/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f64323933336261632d386437612d343366662d616238612d6635326431313866343738622e706e67)](https://camo.githubusercontent.com/55e14b584e25f75ceb1e6672603ffb8e020ab5a6d06142650b8bd754d5d83ca1/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f64323933336261632d386437612d343366662d616238612d6635326431313866343738622e706e67)

假设我们现在修改 index.html 文件，并将 index.html 文件 `git add index.html` 提交到暂存区，再执行 `git ls-files` 查看暂存区的文件结果如下图：

[![](https://camo.githubusercontent.com/aa646fc7f8b6b8909a6778905019eb03f03dd384f514f364063d0beeed56579c/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f33326565346334642d336333632d343836322d393261612d3630336239356335303135382e706e67)](https://camo.githubusercontent.com/aa646fc7f8b6b8909a6778905019eb03f03dd384f514f364063d0beeed56579c/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f33326565346334642d336333632d343836322d393261612d3630336239356335303135382e706e67)

现在我们临时保存 `index.html` 修改状态 `git stash`，储存记录中就会多一条记录：

[![](https://camo.githubusercontent.com/b35dbf97f5c563f30cadad0df00fee76d501bc7fb8de10f39a5731e48b51bcb3/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f66623463633034372d396135642d343730312d616238332d3430306238646561386132312e706e67)](https://camo.githubusercontent.com/b35dbf97f5c563f30cadad0df00fee76d501bc7fb8de10f39a5731e48b51bcb3/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f66623463633034372d396135642d343730312d616238332d3430306238646561386132312e706e67)

当然，工作中不能这么随意，不然记录变多不便于找到自己想恢复的记录，通常使用 `git stash save "message"` 命令：

[![](https://camo.githubusercontent.com/55b370afb29fc16453bfe0b0a9dba193911dc30cbcb5d6c30cb7086cce57e533/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f61323936373138302d356431372d346239622d396331332d3732316530356565643937392e706e67)](https://camo.githubusercontent.com/55b370afb29fc16453bfe0b0a9dba193911dc30cbcb5d6c30cb7086cce57e533/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f61323936373138302d356431372d346239622d396331332d3732316530356565643937392e706e67)

恢复保存的修改有两种常见的方法可以恢复保存的修改。一种是使用 `git stash apply` 命令，它会重新应用最新的 stash，并保留 stash 的副本。另一种是使用 `git stash pop` 命令，它会应用最新的 stash，并将其从 stash 列表中删除。

[![](https://camo.githubusercontent.com/033e70303aaa4b5ffa7c3498d31ce2efeec7daf55e55814f3357db06ba8da709/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f62356162616138392d363163302d343365382d396164332d3333373164363764383738392e706e67)](https://camo.githubusercontent.com/033e70303aaa4b5ffa7c3498d31ce2efeec7daf55e55814f3357db06ba8da709/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f62356162616138392d363163302d343365382d396164332d3333373164363764383738392e706e67) [![](https://camo.githubusercontent.com/a8077d34239586ae6d12f259e333a1bd1bfed21f5830e6cefdca74401a78a80a/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f65343933346634612d393830622d343130622d616234322d3932353864616338366561642e706e67)](https://camo.githubusercontent.com/a8077d34239586ae6d12f259e333a1bd1bfed21f5830e6cefdca74401a78a80a/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f65343933346634612d393830622d343130622d616234322d3932353864616338366561642e706e67)

如果你有多个 stash，你可以通过 `git stash apply stash@{n}` 命令来应用特定的 stash，其中 `n` 是 stash 的索引号。

一旦你不再需要某个 stash，你可以使用 `git stash drop` 命令将其从 stash 列表中删除。

增强 Git 的 VS Code 扩展
-------------------

我想多数人不喜欢在黑白的窗口敲命令，我们可以通过 VS Code 扩展来增强使用 Git，我推荐自己常用的一个 Git 插件为 GitLens，安装如下图：

[![](https://camo.githubusercontent.com/72b2d64112a5daea94ccbca0a64c8c655e0e54c26b0a3dd631896797cc228ab7/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f33396636346235652d326433342d343835322d626361382d6161333763636537383865632e706e67)](https://camo.githubusercontent.com/72b2d64112a5daea94ccbca0a64c8c655e0e54c26b0a3dd631896797cc228ab7/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f33396636346235652d326433342d343835322d626361382d6161333763636537383865632e706e67)

安装后，我们就能直观地看到 Git Stash 所有储藏记录。

[![](https://camo.githubusercontent.com/81a340c41cf152ea399ccdd7ebf85bdff0762231d088aa03c9f5085bf39d4868/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f66646462613438322d326666652d346534352d396131332d6563323333343237636561352e706e67)](https://camo.githubusercontent.com/81a340c41cf152ea399ccdd7ebf85bdff0762231d088aa03c9f5085bf39d4868/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f66646462613438322d326666652d346534352d396131332d6563323333343237636561352e706e67)

这样，添加保存临时工作状态，也就是鼠标点点的事情。

[![](https://camo.githubusercontent.com/39862fec09b1df223c200e874372ea74b59fd7bfb75672348200735203283a77/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f39626262663030662d616630612d343739332d393136652d6365653438653630373530622e706e67)](https://camo.githubusercontent.com/39862fec09b1df223c200e874372ea74b59fd7bfb75672348200735203283a77/68747470733a2f2f66696c65732e6d646e6963652e636f6d2f757365722f33383631382f39626262663030662d616630612d343739332d393136652d6365653438653630373530622e706e67)

还有其他的操作功能，不过多描述，大家安装后稍微点点都能学会。

总结
--

Git Stash 是一个强大而灵活的工具，可帮助开发人员在切换分支、保存临时工作状态和解决代码冲突时更加高效地管理修改。通过合理利用 Git Stash，我们可以处理多任务开发、合并变更和处理紧急情况，从而提高工作效率并确保代码的完整性。掌握 Git Stash 都是一个值得推荐的技巧，它能为你的版本控制流程带来便利和灵活性。

如果我的文章对你有帮助，您的👍就是对我的最大支持 ^_^。

> **关注公粽号【凌览社】回复 "666"，拉您进【人类高质量前端交流群～】**  
> 更多文章链接：[linglan01.cn/about](https://linglan01.cn/about)

 

Nothing to preview