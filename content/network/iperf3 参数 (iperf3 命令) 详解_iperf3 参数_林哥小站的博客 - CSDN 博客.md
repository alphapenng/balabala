> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/meihualing/article/details/112322683)

iPerf3 所有命令参数其实可以在 [iPerf - iPerf3 and iPerf2 user documentation](https://iperf.fr/iperf-doc.php#3doc "iPerf - iPerf3 and iPerf2 user documentation") 官方网站找得到，但第一这个是英文的，而且有一些参数的使用写得语焉不详，下面结合使用经验针对每个参数做一些使用过程中常见的问题说明。下面会翻译一下每个参数，并给每个参数的使用增加一个例子，见每个参数翻译后面的链接的文章（iperf3 3.13 版本增加了很多参数，在 iperf3 主页中未更新但可在以 man iperf3 帮助里看到，本文也未全部完成，陆续补充中，如果你想知道哪个参数详细，但本文还缺失的， **可以评论留言，作者会优先加上**）。

除本文的初步说明外，每个参数可参考如下详细图文分析系列文章：
------------------------------

<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><a href="https://blog.csdn.net/meihualing/article/details/112791974" title="iPerf3 -b参数详细图文分析">iPerf3 -b 参数详细图文分析</a></td><td><a href="https://blog.csdn.net/meihualing/article/details/128976048" title="iPerf3 -M参数详细图文分析">iPerf3 -M 参数详细图文分析</a></td></tr><tr><td><a href="https://blog.csdn.net/meihualing/article/details/112390106" title="iPerf3 -B参数详细图文分析">iPerf3 -B 参数详细图文分析</a></td><td><a href="https://blog.csdn.net/meihualing/article/details/129118904" title="iPerf3 -N参数详细图文分析">iPerf3 -N 参数详细图文分析</a></td></tr><tr><td><a href="https://blog.csdn.net/meihualing/article/details/128779674" title="iPerf3 -p参数详细图文分析">iPerf3 -p 参数详细图文分析</a></td><td><a href="https://blog.csdn.net/meihualing/article/details/129709139" title="iPerf3 -A参数详细图文分析">iPerf3 -A 参数详细图文分析</a></td></tr><tr><td><a href="https://blog.csdn.net/meihualing/article/details/128791243" title="iPerf3 -P参数详细图文分析">iPerf3 -P 参数详细图文分析</a></td><td><a href="https://blog.csdn.net/meihualing/article/details/129643304" title="iPerf3 -w参数详细图文分析">iPerf3 -w 参数详细图文分析</a></td></tr><tr><td><a href="https://blog.csdn.net/meihualing/article/details/129904120" title="iperf3 --bind-dev参数详解及-B参数更新(3.13版本)">iperf3 --bind-dev 参数详解及 - B 参数更新 (3.13 版本)</a></td><td></td></tr></tbody></table>

**如果感兴趣，欢迎访问******[阅读交流 iperf3 源代码阅读分析](https://blog.csdn.net/meihualing/article/details/129273604 "阅读交流iperf3源代码阅读分析")******来一起交流。**
-------------------------------------------------------------------------------------------------------------------------------------

以下是原使用手册的原文与详细说明：

<table><tbody><tr><th colspan="2">GENERAL OPTIONS（通用参数，不管 iperf3 跑在 client 还是 Server 模式下都适用的参数）</th></tr><tr><th>Command line option（命令行参数）</th><th>Description（描述说明）</th></tr><tr><td><strong>-p</strong>, --port&nbsp;<em><strong>n</strong></em></td><td><p>The server port for the server to listen on and the client to connect to. This should be the same in both client and server. Default is 5201.</p><p>（</p><p>1、服务端：服务端监听的端口，默认 5201 端口，同时监听 TCP/UDP</p><p>2、客户端：客户端去连接的端口，默认 5201，如果同时有 - u 参数，则用 UDP 发起连接，如果没有，则默认使用 TCP 连接</p><p>）</p><p>使用方式：</p><p>iperf3 -s -p 6666, 在 6666 端口监听</p><p>iperf3 -c 192.168.0.1 -p 6666, 去连接服务端的 6666 端口</p></td></tr><tr><td><strong>-f</strong>, --format&nbsp;<em><strong>[kmgtKMGT]&nbsp;</strong></em></td><td>A letter specifying the format to print bandwidth numbers in. Supported formats are&nbsp;<pre data-index="0" class="hljs bash">&nbsp;&nbsp;&nbsp; 'k' = Kbits/sec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'K' = KBytes/sec
&nbsp;&nbsp;&nbsp; 'm' = Mbits/sec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'M' = MBytes/sec</pre><p>The adaptive formats choose between kilo- and mega- as appropriate.</p><p>format to report: Kbits/Mbits/Gbits/Tbits</p><p>指定打印测试结果的带宽（bitrate 比特率这一列）时用什么格式显示: k 表示：千比特 / 秒， K 表示：千字节 / 秒， m 表示：兆比特 / 秒， M 表示：兆字节 / 秒， g 表示：吉比特 / 秒， G 表示：吉字节 / 秒， t 表示：兆比特 / 秒， T 表示：太字节 / 秒。</p><p>客户端和服务端可以用不同的参数，各自按照各自指定的方式打印出带宽测试结果</p><p>使用方式：</p><p>iperf3 -s -f M</p><p>iperf3 -c 192.168.0.1 -f k</p></td></tr><tr><td><strong>-i</strong>, --interval&nbsp;<em><strong>n</strong></em></td><td><p>Sets the interval time in seconds between periodic bandwidth, jitter, and loss reports. If non-zero, a report is made every&nbsp;<em><strong>interval</strong></em>&nbsp;seconds of the bandwidth since the last report. If zero, no periodic reports are printed. Default is 1.</p><p>以秒为单位，设置带宽（还有抖动，丢包等）测试报告打印输出的周期。不使用这个选项时，默认周期是 1 秒，可以使用 0 和任何 0.1 秒到 60 秒之间的参数，如果是 0 表示不打印周期性的报告，只在整个测试完成时，输出一次报告结果。客户端和服务端可以使用不同的参数值。</p><p>使用方式：</p><p>iperf3 -s -i 0</p><p>iperf3 -c 192.168.0.1 -i 3.6</p></td></tr><tr><td><strong>-F</strong>, --file name</td><td><p><strong>client-side:</strong>&nbsp;read from the file and write to the network, instead of using random data;<br><strong>server-side:</strong>&nbsp;read from the network and write to the file, instead of throwing the data away.</p><p>Use &nbsp;a &nbsp;file as the source (on the sender) or sink (on the receiver) of data, rather than just generating random data or throwing it away. &nbsp;This feature is used for finding whether or not the&nbsp; storage subsystem is the bottleneck for file transfers. &nbsp;It does not turn iperf3 into a file transfer tool. &nbsp;The length, attributes, and in some cases contents of the received &nbsp;file &nbsp;may &nbsp;not&nbsp; match those of the original file.</p><p>客户端：从文件中读取数据，并发送到网络里，如果不加这个选项默认系统会产生随机数据发送到网络里<br>服务端：把网络上收到的数据写入文件中，默认系统会丢弃收到的数据</p><p>这个功能可以支持使用 iperf3 来测试在文件传输时，文件存储系统的性能会不会成为瓶颈，但有时候收到的文件的长度属性内容可能和发送的文件不一至（应该 是 UDP 有丢包的情况下才会发生），所以我们不能把 iperf3 做为一个文件传输工具来使用。<br>使用方式：<br>iperf3 -s -F ./log.txt</p><p>iperf3 -c 192.168.0.1 -F ./input.txt</p></td></tr><tr><td><strong>-A</strong>, --affinity&nbsp;<em><strong>n/n,m</strong></em></td><td><p>Set the CPU affinity, if possible (Linux and FreeBSD only). On both the client and server you can set the local affinity by using the n form of this argument (where n is a CPU number). In addition, on the client side you can override the server’s affinity for just that one test, using the n,m form of argument. Note that when using this feature, a process will only be bound to a single CPU (as opposed to a set containing potentialy multiple CPUs).</p><p>如果系统支持则可以设置 CPU 亲和性（只支持 Linux 和 FreeBSD），说白了就是在设定将 iperf3 进程跑在哪个 CPU 上。客户端和服务端都可以设置 CPU 亲和性，n 表示 CPU 编号（<strong><a href="https://blog.csdn.net/meihualing/article/details/112471835" title="Linux下如何查看CPU编号及其它CPU相关的信息">Linux 下如何查看 CPU 编号及其它 CPU 相关的信息</a></strong>）。<br>此外在客户端可以通过 "-A n,m" 的形式，覆盖 server 端的 CPU 亲和性设置（就是覆盖运行 server 端时，指定运行在哪个 CPU 上的设置），指定本次运行时 iperf3 的服务端跑在 m 号 CPU 上，但只对这一次运行生效。<br>注意如果用了这个参数，意味着 iperf3 只会在指定的 CPU 上运行（默认不加这个参数时，操作系统会根据当前各个 CPU 核的负额情况，自行调度 iperf 运行在哪个 CPU 上）<br>使用方式：</p><p>iperf3 -s -A 2，指定服务端运行在 2 号 CPU 上</p><p>iperf3 -c 192.168.0.1 -A 0，指定客户端运行在 0 号 CPU 上<br>或者<br>iperf3 -c 192.168.0.1 -A 0,3，指定本次运行客户端运行在 0 号 CPU 上而服务端运行在 2 号 CPU 上</p><p>详见：<a href="https://blog.csdn.net/meihualing/article/details/129709139" title="iPerf3 -A参数详细图文分析">iPerf3 -A 参数详细图文分析</a></p></td></tr><tr><td><strong>-B</strong>, --bind&nbsp;<em><strong>host[%&lt;dev&gt;]</strong></em></td><td><p>Bind to&nbsp;<em><strong>host</strong></em>, one of this machine's addresses. For the client this sets the outbound interface. For a server this sets the incoming interface. This is only useful on multihomed hosts, which have multiple network interfaces.</p><p>optional &lt;dev&gt; equivalent to `--bind-dev &lt;dev&gt;'</p><p>绑定到主机，主机的一个地址。对客户端来说，这个设置数据发送从哪个接口发送。</p><p>对服务端来说，这是设置数据从哪个接口接收。这个命令只在多宿主主机（二个或者二个以上网络接口）中有用。</p><p>这里还有个 [%&lt;dev&gt;] 的选项，这个选项是可选的，功能等同于 "--bind-dev &lt;dev&gt;"</p><p>这个选项对接口的定义很不清楚，没有讲清楚 IP 接口和物理网卡接口选择时，-B 与主机路由的选择关系，</p><p>可以参照另外一个文章有清楚的描述：<strong><a href="https://blog.csdn.net/meihualing/article/details/112390106" title="iPerf3 -B (--bind host)绑定发送端网卡/发送IP端地址">iPerf3 -B (--bind host) 绑定发送端网卡 / 发送 IP 端地址</a></strong></p><p>3.13 版本对上述内容兼容，并有更新 (可选参数 [%&lt;dev&gt;] 部分)，详见：</p><p><a href="https://blog.csdn.net/meihualing/article/details/129904120" title="iperf3 --bind-dev参数详解 -B参数更新详解">iperf3 --bind-dev 参数详解 -B 参数更新详解</a></p><p><strong>以及 Linux 侧路由配置：<a href="https://blog.csdn.net/meihualing/article/details/113058719" title="Linux上添加路由，删除路由，修改路由配置（路由表项基本知识）">Linux 上添加路由，删除路由，修改路由配置（路由表项基本知识）</a></strong></p></td></tr><tr><td>--bind-dev &lt;dev&gt;</td><td><p>bind to the specified network interface. &nbsp;This option uses SO_BINDTODEVICE, and may require root permissions. &nbsp;(Available on Linux and possibly other systems.)</p><p>绑定到指定的网卡上，本选项是使用 SO_BINDTODEVICE 完成的，所以可能需要 root 权限 (只在 linux 或者某此指定操作系统上可用)</p><p>详见：<a href="https://blog.csdn.net/meihualing/article/details/129904120" title="iperf3指定网卡测试 --bind-dev参数详解">iperf3 指定网卡测试 --bind-dev 参数详解</a></p></td></tr><tr><td><strong>-V</strong>, --verbose</td><td><p>give more detailed output</p><p>输入更多的详细信息</p></td></tr><tr><td><strong>-J</strong>, --json</td><td><p>output in JSON format</p><p>运行结束时，用 JSON 的格式输出测试结果，默认打印到屏幕上，可以结合下面 "--logfile" 或者 linux 本身的重定向命令 "&gt;" 将输出报告打印到指定文件里</p></td></tr><tr><td><strong>--logfile</strong>&nbsp;file</td><td><p>send output to a log file. (new in iPerf 3.1)</p><p>把测试结果存到指定的 log 文件</p></td></tr><tr><td>--forceflush</td><td><p>&nbsp;force flushing output at every interval</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--timestamps&lt;=format&gt;</td><td>emit a timestamp at the start of each output line(optional "=" and format string as per strftime(3))<br>这个参数未完成，待更新</td></tr><tr><td>--rcv-timeout #&nbsp;</td><td><p>idle timeout for receiving data (default 120000 ms)</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--snd-timeout #</td><td><p>timeout for unacknowledged TCP data(in ms, default is system settings)</p><p>这个参数未完成，待更新</p></td></tr><tr><td><strong>-d, --debug[=#]&nbsp;</strong></td><td><p>emit debugging output. Primarily (perhaps exclusively) of use to developers.</p><p>(optional optional "=" and debug level: 1-4. Default is 4 - all messages)</p><p>打印出更多的调试用的 log，主要是给开发者用的，如果不是碰到需要调试的问题，这个参数基本没什么用。=# 是可选项，默认是 4，打印所有消息，可以选 1-4</p></td></tr><tr><td><strong>-v</strong>, --version</td><td><p>Show version information and quit.</p><p>只要加了 - v 这个参数，iperf3 会显示版本号，然后自动退出</p></td></tr><tr><td><strong>-h</strong>, --help</td><td><p>Show a help synopsis and quit.</p><p>只要加了 - h 这个参数，iperf3 会显示帮助信息 (包括命令使用格式，各个参数的简明的使用说明)，然后自动退出<br>&nbsp;</p></td></tr><tr><td colspan="2"></td></tr><tr><th colspan="2">SERVER SPECIFIC OPTIONS (服务器端专用参数)</th></tr><tr><th>Command line option（命令行参数）</th><th>Description（具体描述）</th></tr><tr><td><strong>-s</strong>, --server</td><td><p>Run iPerf in server mode. (This will only allow one iperf connection at a time)</p><p><br>本次 iperf3 运行在服务端模式（-c 和 - s 是互斥的，二者必居其一），括号里的这句话：这只允许一次一个 iperf connection，是指 iperf 服务端同一时间只接受一个 TCP 或者 UDP 连接。</p><p>意味着同一时间只有一个客户端可以给这个 iperf3 服务端进程打流。（但可以在通过 - p 参数，指定在同一个主机的同一个 IP 地址的不同的端口同时开多个 iperf3 服务端进程）</p><p>使用方式：</p><p>iperf3 -s</p></td></tr><tr><td><strong>-D</strong>, --daemon</td><td><p>Run the server in background as a daemon.</p><p>以 daemon 的形式在后台运行 (不会向控制台窗口输出，可以通过 ps -aux | grep iperf3 看到对应的后台进程号)</p><p>和用 iperf3 -s &amp; 命令（注意命令最后的 &amp; 号）类似，都可以让 iperf3 在后台运行，但 iperf3 -s &amp; 命令的话，控制台终端还是可以得到 iperf3 的打印输出的。</p><p>但用 &amp; 的后台运行，在你关闭终端时，程序也会关闭，而用 - D 的，<strong>则在终端关闭后，iperf3 -s 会继续在后台运行</strong>。</p><p>下面文章可以详细了解 Linux 前后台程序，如何让程序在后台运行，如何切换前后台，以及 Daemon 进程：</p><p><strong><a href="https://blog.csdn.net/meihualing/article/details/112577550" title="如何在Linux前后台切换程序, 用&amp;把程序运行在后台和以Daemon方式运行的程序（控制台退出后程序继续保持运行）">如何在 Linux 前后台切换程序，用 &amp; 把程序运行在后台和以 Daemon 方式运行的程序（控制台退出后程序继续保持运行）</a></strong></p><p>使用方式:</p><p>iperf3 -s -D</p></td></tr><tr><td>-1, --one-off</td><td><p>handle one client connection then exit</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--server-bitrate-limit #[KMG][/#]</td><td><p>server's total bit rate limit (default 0 = no limit)(optional slash and number of secs interval for averaging&nbsp; total data rate. &nbsp;Default is 5 seconds)</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--idle-timeout #</td><td><p>restart idle server after # seconds in case it&nbsp;got stuck (default - no timeout)</p><p>这个参数未完成，待更新</p></td></tr><tr><td><strong>-I</strong>, --pidfile<em><strong>file</strong></em></td><td><p>write a file with the process ID, most useful when running as a daemon. (new in iPerf 3.1)</p><p>这介需要 iperf3.1 以上版本才支持，提供了一个将本次运行的 iperf3 进程的 PID 写入到指定文件里的功能，正常的情况下也没啥用，大概率在将程序运行成 Daemon 程序，</p><p>并用需要通过 PID 去监控，KILL 或者其它控制这个进程的自动化功能时用到（原文件是这么说的，但我觉得这个指供的功能和 ps -aux | grep iperf3 得到的信息是一样的，</p><p>对于工作在 Linux 下的人来说并没有什么实际意义，估计是给其它平台的工作者用的）</p><p>使用方式：</p><p></p><p>iperf3 -s -I /home/user/iperf.pid</p><p></p><p>注意：</p><p>1）当前用户一定要有 /home/user 目录的写权限</p><p>2）文件可以事先用 touch 命令创建好，也可以不用创建</p><p>3）iperf3 当前进各结束后 /home/user/iperf.pid 文件会被主动删除</p><p>4）/home/user/iperf.pid 一定要使用全路径，不能使用默认的当前路径</p><p>&nbsp; &nbsp;（使用当前路径分导致各种奇怪的 iperf 启动失败，或者启动成功了，但指定目录找到不 iperf.pid 文件），原因不明</p></td></tr><tr><td>--rsa-private-key-path file</td><td><p>Path to the RSA private key (not password-protected) used to decrypt authentication credentials from the client (if built with OpenSSL support).</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--authorized-users-path file</td><td><p>path &nbsp;to &nbsp;the &nbsp;configuration &nbsp;file &nbsp;containing &nbsp;authorized &nbsp;users credentials to run iperf tests (if built with OpenSSL support). &nbsp;The file is a comma separated list of usernames and password&nbsp;hashes; more information on the structure of the file can be found in the EXAMPLES section.</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--time-skew-thresholdsecond seconds</td><td><p>time skew threshold (in seconds) between the server and client during the authentication process.</p><p>这个参数未完成，待更新</p></td></tr><tr><td colspan="2"></td></tr><tr><th colspan="2">CLIENT SPECIFIC OPTIONS（客户端专用参数）</th></tr><tr><th>Command line option（命令行参数）</th><th>Description（具体描述）</th></tr><tr><td><strong>-c</strong>, --client&nbsp;<em><strong>host</strong></em></td><td><p>Run iPerf in client mode, connecting to an iPerf server running on&nbsp;<em><strong>host</strong></em>.</p><p>本次 iperf3 运行在客户端状态，host 指向的是 iperf 服务端的 ip 地址</p><p>使用方式:</p><p>iperf3 -c 192.168.0.10, 本机做为客户端连接到 192.168.0.10 (服务端运行在这人 ip 地址上)，并做打流量测试</p></td></tr><tr><td><strong>--sctp</strong></td><td><p>Use SCTP rather than TCP (Linux, FreeBSD and Solaris). (new in iPerf 3.1)</p><p>使用 sctp 协议（不加这人选项的话默认使用 tcp），iperf3.1 及更新的版本开始支持</p><p>使用方式:</p><p>iperf3 -c 192.168.0.10 --sctp</p></td></tr><tr><td><strong>-u</strong>, --udp</td><td><p>Use UDP rather than TCP. See also the&nbsp;<a href="https://iperf.fr/iperf-doc.php#3bandwidth" title="-b">-b</a>&nbsp;option.</p><p>使用 udp 协议（不加这人选项的话默认使用 tcp），使用这个选项的话，还需要查看 - b 选项，因为 UDP 是面向数据报的协议，所以一般要用 - b 指定打多大带宽的数据 (不指定 - b 的话，默认值见对 - b 参数的解释)</p><p>使用方式:</p><p>iperf3 -c 192.168.0.10 -u</p></td></tr><tr><td>--connect-timeout n</td><td>set &nbsp;timeout for establishing the initial control connection to the server, in milliseconds. &nbsp;The default behavior is the operating system's timeout for TCP connection establishment. &nbsp;Provid‐ing a shorter value may speed up detection of a down iperf3 server.<br>这个参数未完成，待更新</td></tr><tr><td><strong>-b</strong>, --bandwidth&nbsp;<em><strong>n[KM]</strong></em></td><td><p>Set target bandwidth to n bits/sec (default 1 Mbit/sec for UDP, unlimited for TCP). If there are multiple streams (-P flag), the bandwidth limit is applied separately to each stream. You can also add a ’/’ and a number to the bandwidth specifier. This is called "burst mode". It will send the given number of packets without pausing, even if that temporarily exceeds the specified bandwidth limit.</p><p>设置本次测试的发送带宽成 n 比特 / 秒（对 UDP 来说<strong>默认是 1M 比特 / 秒，对 TCP 来说默认是不限制</strong>），如果同时还设置了多线程 (-P 选项)，当前这个 - b 的带宽指定的是每个线程的发送带宽。</p><p>我们还可以在带宽后面加上 / 和一个数字。我们称这个为 “突发脉冲模式”。加了这个 “/ 数字” 后，iperf3 客户端会一次连续发送指定的数量的数据包，中间不做任何间隔（不加这个 "/ 数字" 时，iperf3 会根据每个报文的长度，算出为了达到指定的带宽，每秒需要发送几个报文，然后每个数据报文会被以平均的时间间隔进行发送），即使中间会有偶尔的超出带宽限制</p><p>使用方式:</p><p>iperf3 -c 192.168.0.10 -u -b 100M，报文平均的落在时间线上</p><p>或者</p><p>iperf3 -c 192.168.0.10 -u -b 100M/40，报文以 40 个为一组，连续发送 40 个报文，每一组平均的落在时间线上，每一组发送时可能超出 - b 指定的带宽，但 iperf3 保证整个打流期间的平均带宽不超过指定值。</p><p></p><p>详见：<strong><a href="https://blog.csdn.net/meihualing/article/details/112791974" title="iperf3 -b参数详细图文分析">iperf3 -b 参数详细图文分析</a></strong></p></td></tr><tr><td>--pacing-timer n[KMGT]</td><td><p>&nbsp;set pacing timer interval in microseconds (default 1000 microseconds, or 1 ms). &nbsp;This controls iperf3's internal pacing timer for the -b/--bitrate option. &nbsp;The timer fires at the interval set&nbsp;by this parameter. &nbsp;Smaller values of the pacing timer parameter smooth out the traffic emitted by iperf3, but potentially at the cost of performance due to more frequent timer processing.</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--fq-rate n[KMGT]</td><td><p>Set a rate to be used with fair-queueing based socket-level pacing, in bits per second. &nbsp;This pacing (if specified) will be in addition to any pacing due to iperf3's internal throughput &nbsp;pac‐ing &nbsp;(-b/--bitrate &nbsp;flag), and both can be specified for the same test. &nbsp;Only available on platforms supporting the SO_MAX_PACING_RATE socket option (currently only Linux). &nbsp;The default is no&nbsp;fair-queueing based pacing.</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--no-fq-socket-pacing</td><td><p>This option is deprecated and will be removed. &nbsp;It is equivalent to specifying --fq-rate=0.</p><p>这个参数未完成，待更新</p></td></tr><tr><td><strong>-t</strong>, --time&nbsp;<em><strong>n</strong></em></td><td><p>The time in seconds to transmit for. iPerf normally works by repeatedly sending an array of&nbsp;<em><strong>len</strong></em>&nbsp;bytes for&nbsp;<em><strong>time</strong></em>&nbsp;seconds. Default is 10 seconds. See also the&nbsp;<a href="https://iperf.fr/iperf-doc.php#3len" title="-l">-l</a>,&nbsp;<a href="https://iperf.fr/iperf-doc.php#3blockcount" title="-k">-k</a>&nbsp;and&nbsp;<a href="https://iperf.fr/iperf-doc.php#3num" title="-n">-n</a>&nbsp;options.</p><p>定义本次发送报文测试要持续的时间，单位为秒 iPerf 通常工作的模式是：持续 - t 定义的时间（秒）不停的重复发送一组长度为 - l 定义的数据包。默认值是 10 秒。参照 - l, -k 和 - n 选项<br>使用方式：<br>iperf3 -c 127.0.0.1 -u -t 11<br>注意这个参数不能和 - n 或者 - k 同时使用，上述例子表示连续发送 11 秒钟时间后停止测试&nbsp;</p></td></tr><tr><td><strong>-n</strong>, --num&nbsp;<em><strong>n[KMGT]</strong></em></td><td><p>The number of buffers to transmit. Normally, iPerf sends for 10 seconds. The -n option overrides this and sends an array of&nbsp;<em><strong>len</strong></em>&nbsp;bytes&nbsp;<em><strong>num</strong></em>&nbsp;times, no matter how long that takes. See also the&nbsp;<a href="https://iperf.fr/iperf-doc.php#3len" title="-l">-l</a>,&nbsp;<a href="https://iperf.fr/iperf-doc.php#3blockcount" title="-k">-k</a>&nbsp;and&nbsp;<a href="https://iperf.fr/iperf-doc.php#3time" title="-t">-t</a>&nbsp;options.</p><p>定义本次发送报文要发送的总的数据长度，单位是字节。默认情况下 iperf 持续发送 10 秒时间。加了 - n 选项后，就不覆盖了 10 秒这个默认设置，而是发送 - n 指定长度的数据，发送完后停止。参照 - l,-k 和 - t 选项<br>使用方式：<br>iperf3 -c 127.0.0.1 -u -n 40M<br>注意这个参数不能和 - t 或者 - k 同时使用，长度后面不带单位的话默认单位是字节，也可以用 K/M 表示千 / 兆字节，上述例子表示总共要发送 40M 字节的报文</p></td></tr><tr><td><strong>-k</strong>, --blockcount&nbsp;<em><strong>n[KMGT]</strong></em></td><td><p>The number of blocks (packets) to transmit. (instead of -t or -n) See also the&nbsp;<a href="https://iperf.fr/iperf-doc.php#3time" title="-t">-t</a>,&nbsp;<a href="https://iperf.fr/iperf-doc.php#3len" title="-l">-l</a>&nbsp;and&nbsp;<a href="https://iperf.fr/iperf-doc.php#3num" title="-n">-n</a>&nbsp;options.</p><p>定义本次发送报文要发送的报文个数。发送 - k 指定个数的报文，发送完后停止。参照 - l,-n 和 - t 选项<br>使用方式：<br>iperf3 -c 127.0.0.1 -u -k 37<br>注意这个参数不能和 - t 或者 - n 同时使用，上面例子表示总共要发送 37 个报文</p></td></tr><tr><td><strong>-l</strong>, --length&nbsp;<em><strong>n[KMGT]</strong></em></td><td><p>The length of buffers to read or write. iPerf works by writing an array of&nbsp;<em><strong>len</strong></em>&nbsp;bytes a number of times. Default is 128 KB for TCP, 8 KB for UDP. See also the&nbsp;<a href="https://iperf.fr/iperf-doc.php#3num" title="-n">-n</a>,&nbsp;<a href="https://iperf.fr/iperf-doc.php#3blockcount" title="-k">-k</a>&nbsp;and&nbsp;<a href="https://iperf.fr/iperf-doc.php#3time" title="-t">-t</a>&nbsp;options.</p><p>每次发报的报文长度。iperf 发送一组长度为 - l 指定的数据报文，每个数据报文的长度都是 - l 指定的长度。默认 TCP 是 128KB, UDP 是 8KB。参照 - n, -k 和 - t 选项。</p><p>使用方式:</p><p>iperf3 -c 192.168.3.15 -u -l 2K</p><p>注意：这个参数可以和 - n, -k 和 - t 参数一起使用。</p></td></tr><tr><td><strong>-P</strong>, --parallel&nbsp;<em><strong>n</strong></em></td><td><p>The number of simultaneous connections to make to the server. Default is 1.</p><p>到 iperf3 服务器端并行的连接数量，默认值是 1。（在日常测试中，我们会发现当最大吞吐量上不去的时候，开多个并行连接一般会立竿见影的提升最大吞吐量，通常我人们的第一反应是 iperf 开启了多线程 (详见：<a href="https://blog.csdn.net/meihualing/article/details/128785768" title="Linux下如何查看多线程进程里的线程信息">Linux 下如何查看多线程进程里的线程信息</a>)，但事实上在开启多个并行连接的情况下 iperf 不论是客户端还是服务端，依然工作在单线程模式下 (详见：<pangu> </pangu><a href="https://blog.csdn.net/meihualing/article/details/128791243" title="iPerf3 -P参数详细图文分析">iPerf3 -P 参数详细图文分析</a>），最大吞吐量主要取决于接收方主机，发送方主机和网络 3 个节点的，最大带宽，最大包处理能力，延时这三个能力，后面我们可以专门开篇讲讲做最大吞吐量测试 3 个节点 3 个能力的影响，以及应该如何正确设置 iperf 的参数。</p><p>使用方式:</p><p>iperf3 -c 192.168.3.15 -u -P 3</p><p>表示开 3 个连接。</p></td></tr><tr><td><strong>-R</strong>, --reverse</td><td><p>Run in reverse mode (server sends, client receives).</p><p>工作在反向连接模式（服务器端发送，客户端接收）</p><p>使用方式：</p><p>iperf3 -c 192.168.3.15 -u -R</p></td></tr><tr><td>--bidir</td><td>test in both directions (normal and reverse), with both the client and server sending and receiving data simultaneously<p>这个参数未完成，待更新</p></td></tr><tr><td><strong>-w</strong>, --window&nbsp;<em><strong>n[KMGT]</strong></em></td><td><p>Sets the socket buffer sizes to the specified value. For TCP, this sets the TCP window size. (this gets sent to the server and used on that side too)</p><p>设置 socket 缓冲的大小。对 TCP 来说，这个用于设置 TCP 窗口接收的大小（这个选项会被发送到服务器端，同样的参数会在服务器端生效）</p><p>iperf3 -c 192.168.3.15 -w 100k</p><p>对于 UDP 来说，通常不需要设置这个参数，这个数设置得太小了，会导致发送端发送速度慢，</p><p>对于 TCP 来说，这个参数的设置值的计算和选择方法详见：<a href="https://blog.csdn.net/meihualing/article/details/112687263" title="TCP滑动窗口协议与流量控制">TCP 滑动窗口协议与流量控制</a></p><p>-w 使用参数详解可以见：</p><p><a href="https://blog.csdn.net/meihualing/article/details/129643304" title="iPerf3 -w参数详细图文分析">iPerf3 -w 参数详细图文分析</a></p></td></tr><tr><td><strong>-M</strong>, --set-mss&nbsp;<em><strong>n</strong></em></td><td><p>Attempt to set the TCP maximum segment size (MSS). The MSS is usually the MTU - 40 bytes for the TCP/IP header. For ethernet, the MSS is 1460 bytes (1500 byte MTU).</p><p>尝试去设置 TCP 的 MSS 最大分片长度。MSS 通常是 MTU 减去 40 字节的 TCP/IP 首部。对以达网来说 MSS 是 1460（MTU 是 1500 字节）</p><p>使用方式：</p><p>iperf3 -c 192.168.3.15 -M 100</p><p>MSS 设置得很小，会导致 TCP 分成很多个小包进行发送，过小会导致带宽测试结果偏小。</p><p></p><p>MSS 的说明见：<strong><a href="https://blog.csdn.net/meihualing/article/details/113739693" title="TCP的MSS的计算与详解">TCP 的 MSS 的计算与详解</a></strong></p><p>-M 参数如何设置见：<a href="https://blog.csdn.net/meihualing/article/details/128976048" title="iPerf3 -M参数详细图文分析">iPerf3 -M 参数详细图文分析</a></p></td></tr><tr><td><strong>-N</strong>, --no-delay</td><td><p>Set the TCP no delay option, disabling Nagle's algorithm. Normally this is only disabled for interactive applications like telnet.</p><p>设置 TCP 的不延时选项，关闭 Nagle's 算法，通常这个选项只用于交互式人机对话的应用程序中，比如 Telnet</p><p>使用方式：</p><p>iperf3 -c 192.168.3.26 -N</p><p></p><p>其实这个在小报文测试场景里（测试的目标就是看网络对大量小报文的处理能力）时，非常有用，这个测试场景里就应该关闭 Nagle 算法和 TCP_CORK，保证每个小报文都被及时送出。</p><p>原理见：</p><p><a href="https://blog.csdn.net/meihualing/article/details/129112428" title="TCP的Nagle算法和delayed ack（延时发送和延时应答与稍带应答）">TCP 的 Nagle 算法和 delayed ack（延时发送和延时应答与稍带应答）</a></p><p>和 <a href="https://blog.csdn.net/meihualing/article/details/129125346" title="TCP_CORK选项">TCP_CORK 选项</a></p><p>使用场景分析见：</p><p><a href="https://blog.csdn.net/meihualing/article/details/129118904" title="iPerf3 -N参数详细图文分析">iPerf3 -N 参数详细图文分析</a></p></td></tr><tr><td><strong>-4</strong>, --version4</td><td><p>only use IPv4.</p><p>只使用 IPv4</p></td></tr><tr><td><strong>-6</strong>, --version4</td><td><p>only use IPv6.</p><p>只使用 IPv6, 注意这个要配合 IPv6 的地址一起使用</p></td></tr><tr><td><strong>-S</strong>, --tos&nbsp;<em><strong>n</strong></em></td><td><p>The type-of-service for outgoing packets. (Many routers ignore the TOS field.) You may specify the value in hex with a '0x' prefix, in octal with a '0' prefix,</p><p>or in decimal. For example, '0x10' hex = '020' octal = '16' decimal. The TOS numbers specified in RFC 1349 are:&nbsp;</p><p></p><p>&nbsp;&nbsp;&nbsp; IPTOS_LOWDELAY&nbsp;&nbsp;&nbsp;&nbsp; minimize delay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x10</p><p>&nbsp;&nbsp;&nbsp; IPTOS_THROUGHPUT&nbsp;&nbsp; maximize throughput&nbsp;&nbsp; 0x08</p><p>&nbsp;&nbsp;&nbsp; IPTOS_RELIABILITY&nbsp; maximize reliability&nbsp; 0x04</p><p>&nbsp;&nbsp;&nbsp; IPTOS_LOWCOST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minimize cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02</p><p></p><p>设置被发送出去的报文的 TOS 字段。(目前很多路由器是不处理 TOS 字段的)，可以用 0x 打头输入 16 进制数，0 打头输入 8 进制数，或者不需要前缀则默认是 10 进制数。</p><p>比如: 16 进制的 "0x10" 表示 8 进制的 "020" 表示十进制的 16。</p><p>TOS 定义如下：</p><p>&nbsp;&nbsp;&nbsp; IPTOS_LOWDELAY&nbsp;&nbsp;&nbsp;&nbsp; 最小延时 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x10</p><p>&nbsp;&nbsp;&nbsp; IPTOS_THROUGHPUT&nbsp;&nbsp; 最大带宽 &nbsp; 0x08</p><p>&nbsp;&nbsp;&nbsp; IPTOS_RELIABILITY&nbsp; 可靠性最好&nbsp; 0x04</p><p>&nbsp;&nbsp;&nbsp; IPTOS_LOWCOST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最便宜 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02</p><p>使用方式：</p><p>iperf3 -c 192.168.3.15 -S 0x10</p></td></tr><tr><td>--dscp dscp</td><td>set &nbsp;the IP DSCP bits. &nbsp;Both numeric and symbolic values are accepted. Numeric values can be specified in decimal, octal and hex (see --tos above). To set both the DSCP bits and the ECN bits, use --tos.<br>这个参数未完成，待更新</td></tr><tr><td><strong>-L</strong>, --flowlabel&nbsp;<em><strong>n</strong></em></td><td><p>Set the IPv6 flow label (currently only supported on Linux).</p><p>设置 IPv6 的流标签（目前只有 Linux 版本的 iperf3 能支持）</p></td></tr><tr><td>-X, --xbind name</td><td><p>Bind SCTP associations to a specific subset of links using sctp_bindx(3). &nbsp;The --B flag will be ignored if this flag is specified. &nbsp;Normally SCTP will include the protocol &nbsp;addresses &nbsp;of &nbsp;all&nbsp;active &nbsp;links &nbsp;on the local host when setting up an association. Specifying at least one --X name will disable this behaviour. &nbsp;This flag must be specified for each link to be included in the&nbsp; association, and is supported for both iperf servers and clients (the latter are supported by passing the first --X argument to bind(2)). &nbsp;Hostnames are accepted as arguments and are resolved&nbsp;using getaddrinfo(3). &nbsp;If the --4 or --6 flags are specified, names which do not resolve to addresses within the specified protocol family will be ignored.</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--nstreams n</td><td><p>Set number of SCTP streams.</p><p>这个参数未完成，待更新</p></td></tr><tr><td><strong>-Z</strong>, --zerocopy</td><td><p>Use a "zero copy" method of sending data, such as sendfile(2), instead of the usual write(2). This uses much less CPU.</p><p>使用 “零拷贝” 办法来发送数据，比如使用 sendfile (2) 代替 write (2). 这会减少 CPU 的占用率</p><p>使用方式：</p><p>iperf3 -c 192.168.3.15 -u -Z</p></td></tr><tr><td><strong>-O</strong>, --omit&nbsp;<em><strong>n</strong></em></td><td><p>Omit the first n seconds of the test, to skip past the TCP&nbsp;<a href="https://en.wikipedia.org/wiki/Slow-start" title="TCP slowstart">TCP slowstart</a>&nbsp;period.</p><p>忽略最前面 n 秒的测试结果，通常用来跳过 <strong>TCP 慢启动</strong>过程</p><p>使用方式：</p><p>iperf3 -c 192.168.3.15 -O 20 -t 40</p><p>忽略最前面的 20 秒，然后再打 40 秒的流 (见 - t 参数)</p><p>TCP 在启动阶段，会有一个慢启动与拥塞避免的吞吐量爬坡过程，这个过程中吞吐量比较低，忽略这个时间可以测试出网络的真正的吞吐量情况。</p><p>详见：<a href="https://blog.csdn.net/meihualing/article/details/112687251" title="TCP慢启动与拥塞控制">TCP 慢启动与拥塞控制</a></p></td></tr><tr><td><strong>-T, --title&nbsp;<em><strong>str</strong></em></strong></td><td><p>Prefix every output line with this string.</p><p>每行打印输出内容前加一个前缀</p><p>使用方式：</p><p>iperf3 -c 192.168.3.15 -T 这是前缀</p><p>在每行输入前面加了 “这是前缀” 这 4 个字，不知道这个功能有什么用</p></td></tr><tr><td>--extra-data str</td><td><p>Specify an extra data string field to be included in JSON output.</p><p>这个参数未完成，待更新</p></td></tr><tr><td><strong>-C</strong>, --linux-congestion&nbsp;<em><strong>algo</strong></em></td><td><p>Set the&nbsp;<a href="https://en.wikipedia.org/wiki/TCP_congestion-avoidance_algorithm" title="congestion control algorithm">congestion control algorithm</a>&nbsp;(Linux only for iPerf 3.0, Linux and FreeBSD for iPerf 3.1).</p><p>设置 <strong>TCP 拥塞控制算法</strong> (在 LINUX 上 3.0 以上支持，在 LINUX 和 FREEBSD 上 3.1 以下版本支持)</p><p>在开始设置这个参数之前，需要对 <a href="https://blog.csdn.net/meihualing/article/details/112687263" title="TCP流量控制与拥塞控制算法">TCP 流量控制与拥塞控制算法</a>有基本的理解，并对自己的网络状态有清楚的认知的情况下，才能正确设置本参数</p></td></tr><tr><td><strong>--cport</strong>&nbsp;<em><strong>n</strong></em></td><td><p>Option to specify the client-side port. (new in iPerf 3.1)</p><p>本参数提供了一个指定客户端本地端口的选项，区分于 - p 指定的是服务端的远端端口</p><p>使用方式：</p><p>iperf3 -s --cport 8888,&nbsp; 从测试结果看，这个选项在服务端不起任何作用，但执行命令不会报错</p><p>iperf3 -c 192.168.0.1 --cport 8888，指定客户端选择本地端口为 8888</p></td></tr><tr><td>--get-server-output</td><td><p>Get &nbsp;the output from the server. &nbsp;The output format is determined by the server (in particular, if the server was invoked with the --json flag, the output will be in JSON format, otherwise it&nbsp;will be in human-readable format). &nbsp;If the client is run with --json, the server output is included in a JSON object; otherwise it is appended at the bottom of the human-readable output.&nbsp; &nbsp; &nbsp; &nbsp;</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--udp-counters-64bit</td><td><p>Use 64-bit counters in UDP test packets. &nbsp;The use of this option can help prevent counter overflows during long or high-bitrate UDP tests. &nbsp;Both client and server need to be running at &nbsp;least&nbsp;version 3.1 for this option to work. &nbsp;It may become the default behavior at some point in the future.&nbsp; &nbsp; &nbsp; &nbsp;</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--repeating-payload</td><td><p>Use &nbsp;repeating &nbsp;pattern &nbsp;in &nbsp;payload, instead of random bytes. &nbsp;The same payload is used in iperf2 (ASCII '0..9' repeating). &nbsp;It might help to test and reveal problems in networking gear with hardware compression (including some WiFi access points), where iperf2 and iperf3 perform differently, just based on payload entropy.</p><p>这个参数未完成，待更新&nbsp; &nbsp; &nbsp; &nbsp;</p></td></tr><tr><td>--dont-fragment</td><td><p>Set the IPv4 Don't Fragment (DF) bit on outgoing packets. &nbsp;Only applicable to tests doing UDP over IPv4.</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--username username</td><td><p>username to use for authentication to the iperf server (if built with OpenSSL support). &nbsp;The password will be prompted for interactively when the test is run. &nbsp;Note, the password to &nbsp;use &nbsp;can&nbsp;also be specified via the IPERF3_PASSWORD environment variable. If this variable is present, the password prompt will be skipped.</p><p>这个参数未完成，待更新</p></td></tr><tr><td>--rsa-public-key-path file</td><td><p>path to the RSA public key used to encrypt authentication credentials (if built with OpenSSL support)</p><p>这个参数未完成，待更新</p></td></tr></tbody></table>